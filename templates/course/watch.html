{% extends "base/modelo.html" %}
{% load static %}


{% block 'cssfiles' %}
      <title>Ndakussoka - Assistir Curso</title>
      <!-- Bootstrap CSS -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
      <!-- Ícones (Bootstrap Icons) -->
    <link href="{% static 'bootstrp/font/bootstrap-icons.min.css' %}" rel="stylesheet">

      <link href="{% static 'css/course-watch.css' %}" rel="stylesheet">
{% endblock 'cssfiles' %}

{% block 'conteudo' %}
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar (Módulos/Aulas) -->
      <div class="col-md-3 col-lg-2 sidebar p-3">
        <h5 class="text-white mb-4">Módulos do Curso</h5>
        
        {% for module in modules %}
            <!-- Módulo 1 -->
            <div class="modulo mb-3">
            <div class="modulo-title d-flex justify-content-between align-items-center" data-bs-toggle="collapse" href="#{{module.id}}">
                  <span>{{module}}</span>
                  <i class="bi bi-chevron-down"></i>
            </div>
            <div class="collapse show" id="{{module.id}}">
                  <ul class="list-unstyled mt-2">

                        {% for lesson in lessons  %}
                              {% if lesson.modulo == module %}
                                  <li class="aula-item py-1">
                                    <a class='text-white' href='?lesson={{lesson.slug}}'>{{lesson}}</a>
                                  </li>  
                              {% endif %}
                        {% endfor %}
                  
                  </ul>
            </div>
            </div>
        {% endfor %}
        {% comment %} <!-- Módulo 2 -->
        <div class="modulo mb-3">
          <div class="modulo-title d-flex justify-content-between align-items-center" data-bs-toggle="collapse" href="#modulo2">
            <span>Módulo 2: Básico</span>
            <i class="bi bi-chevron-down"></i>
          </div>
          <div class="collapse" id="modulo2">
            <ul class="list-unstyled mt-2">
              <li class="aula-item py-1">Aula 3: Primeiros Passos</li>
              <li class="aula-item py-1">Aula 4: Prática</li>
            </ul>
          </div>
        </div> {% endcomment %}
      </div>

      <!-- Conteúdo Principal (Vídeo + Materiais) -->
      <div class="col-md-9 col-lg-10 py-4 px-4">
        <!-- Título da Aula -->
        <h2 class="mb-4">Aula: {{current_lesson}}</h2>
        
        <!-- Player de Vídeo -->
        <div class="video-container mb-4 ratio ratio-16x9">
          <!-- Vídeo placeholder (substitua pelo seu player) -->
           <video src="{{current_lesson.video.video.url}}" controls></video>
        </div>
        
        <!-- Descrição da Aula -->
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-info-circle"></i> Sobre esta aula</h5>
            <p class="card-text">{{current_lesson.about}}</p>
          </div>
        </div>
        
        {% if is_payed %}
        <!-- Seção de Materiais (estilo Coursera) -->
        <h4 class="mt-5 mb-3"><i class="bi bi-file-earmark"></i> Materiais de Apoio</h4>
        <div class="row">
          <!-- Material 1 -->
          <div class="col-md-6 mb-3">
            <div class="card h-100 material-card">
              <div class="card-body">
                <h5 class="card-title"><i class="bi bi-filetype-pdf"></i> Slides da Aula</h5>
                <p class="card-text">Baixe os slides em PDF para acompanhar a aula.</p>
                <a href="{{current_lesson.material.file.url}}" target="_blank" class="btn btn-sm btn-outline-primary"><i class="bi bi-download"></i> Baixar</a>
              </div>
            </div>
          </div>
          
          <!-- Material 2 -->
          <div class="col-md-6 mb-3">
            <div class="card h-100 material-card">
              <div class="card-body">
                <h5 class="card-title"><i class="bi bi-link-45deg"></i> Links Úteis</h5>
                <p class="card-text">Referências e documentação complementar.</p>
                <a href="#" class="btn btn-sm btn-outline-primary"><i class="bi bi-box-arrow-up-right"></i> Acessar</a>
              </div>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
  
  
  {% endblock 'conteudo' %}
  
  {% block 'jsfiles' %}
  
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock 'jsfiles' %}
{% extends "base/modelo.html" %}
{% load static %}


{% block 'cssfiles' %}
  <!-- Bootstrap CSS -->
  <!-- Ícones (Bootstrap Icons) -->
  <link href="{% static '/bootstrp/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'bootstrp/font/bootstrap-icons.min.css' %}" rel="stylesheet">
  <link href="{% static 'css/course-watch.css' %}" rel="stylesheet">
{% endblock 'cssfiles' %}

{% block 'conteudo' %}
  <div class="container-fluid p-0">
    <div class="d-flex m-0 p-0">
      <!-- Sidebar (Módulos/Aulas) -->
      <div class="sidebar p-3">
        <h5 class="text-white mb-4">Módulos do Curso</h5>
        
        {% for module in modules %}
            <!-- Módulo 1 -->
            <div class="modulo mb-3">
            <div class="modulo-title d-flex justify-content-between align-items-center" data-bs-toggle="collapse" href="#{{module.id}}">
                  <span>{{module}}</span>
                  <i class="bi bi-chevron-down"></i>
            </div>
            <div class="collapse show" id="{{module.id}}">
                  <ul class="list-unstyled mt-2">

                        {% for lesson in lessons  %}
                              {% if lesson.modulo == module %}
                                  <li class="aula-item py-1">
                                    <a class='text-white' href='?lesson={{lesson.slug}}'><i class='bi bi-tv mr-2'></i>{{lesson}}</a>
                                  </li>  
                              {% endif %}
                        {% endfor %}
                  
                  </ul>
            </div>
            </div>
        {% endfor %}
      </div>

      <!-- Conteúdo Principal (Vídeo + Materiais) -->
      <div class="col-md-9 col-lg-10 py-4 px-4">
        <!-- Título da Aula -->
        <div class='d-flex justify-content-between'>
          <h2 class="mb-4">Aula: {{current_lesson|upper}}</h2>
          <h2 class="mb-4"><a href='{% url "home" %}'><i class='bi bi-house'></i></a></h2>
        </div>
        
        <!-- Player de Vídeo -->
        <div class="video-container mb-4 ratio ratio-16x9">
          <!-- Vídeo placeholder (substitua pelo seu player) -->
           <video src="{{current_lesson.video.video.url}}" controls></video>
        </div>
        
        <!-- Descrição da Aula -->
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-info-circle"></i> Sobre esta aula</h5>
            <p class="card-text">{{current_lesson.about}}</p>
          </div>
        </div>
        
        {% if is_payed %}
        <!-- Seção de Materiais (estilo Coursera) -->
        <h4 class="mt-5 mb-3"><i class="bi bi-file-earmark"></i> Materiais de Apoio</h4>
        <div class="row">
          <!-- Material 1 -->
          <div class="col-md-6 mb-3">
            <div class="card h-100 material-card">
              <div class="card-body">
                <h5 class="card-title"><i class="bi bi-filetype-pdf"></i> Slides da Aula</h5>
                <p class="card-text">Baixe os slides em PDF para acompanhar a aula.</p>
                <a href="{{current_lesson.material.file.url}}" target="_blank" class="btn btn-sm btn-outline-primary"><i class="bi bi-download"></i> Baixar</a>
              </div>
            </div>
          </div>
          
          <!-- Material 2 -->
          <div class="col-md-6 mb-3">
            <div class="card h-100 material-card">
              <div class="card-body">
                <h5 class="card-title"><i class="bi bi-link-45deg"></i> Links do Desafio</h5>
                <p class="card-text">Completar os Desafios da Aula.</p>
                <a href="#" class="btn btn-sm btn-outline-primary"><i class="bi bi-box-arrow-up-right"></i> Acessar</a>
              </div>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
  
  
{% endblock 'conteudo' %}
  
{% block 'jsfiles' %}

  <!-- Bootstrap JS -->
  <script src="{% static '/bootstrp/js/bootstrap.min.js' %}"></script>

{% endblock 'jsfiles' %}